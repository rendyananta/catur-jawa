!function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=81)}({81:function(t,n,e){t.exports=e(82)},82:function(t,n){var e,i=document.getElementById("board"),o=i.getContext("2d"),r={canvas:{width:980,height:980},board:{columns:40,rows:40}},a=r.board.columns*T(),c=r.board.rows*_(),u=.5*(r.canvas.width-a),l=.5*(r.canvas.height-c),d=[],f=(e=new Array(r.board.rows),function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(e)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).map((function(){return Array(r.board.columns).fill({content:null,user_id:null})})),s=null,h=null,y=null,x=null,v=null,g=i.getAttribute("data-match-id"),m=document.getElementById("turn"),b=document.getElementById("not-turn");function w(t,n,e){var i={grid:{x:t,y:n,state:e}};!function(t){axios.patch("/api/game/"+y.id+"/move",{from:t.grid,states:f}).then((function(t){}))}(i),Echo.private("match.".concat(y.id)).whisper("turn",i)}function p(t){s=t,console.log(s,M()),M()&&"X"===s||O()&&"O"===s?(b.style.visibility="hidden",m.style.visibility="visible"):(M()&&"O"===s||O()&&"X"===s)&&(b.style.visibility="visible",m.style.visibility="hidden")}function M(){return y.inviter_id===h.id}function O(){return!M()}function T(){return.9*r.canvas.height/r.board.columns}function _(){return.9*r.canvas.width/r.board.rows}function P(t,n){void 0!==n&&("X"===n?S(t):"O"===n&&X(t)),o.lineWidth=1,o.beginPath(),o.moveTo(t.xMax,t.y),o.lineTo(t.xMax,t.yMax),o.lineTo(t.x,t.yMax),o.stroke()}function S(t){var n=A(t,-5);o.lineWidth=2,o.beginPath(),o.moveTo(n.x,n.y),o.lineTo(n.xMax,n.yMax),o.stroke(),o.beginPath(),o.moveTo(n.x,n.yMax),o.lineTo(n.xMax,n.y),o.stroke()}function X(t){var n=A(t,-5),e=Math.min(n.width,n.height);o.lineWidth=2,o.beginPath(),o.arc(n.x+.5*n.width,n.y+.5*n.height,.5*e,0,2*Math.PI),o.stroke()}function j(t,n,e,i){return{x:t,y:n,width:e,height:i,xMax:t+e,yMax:n+i}}function A(t,n,e){return void 0===e&&(e=n),j(t.x-.5*n,t.y-.5*e,t.width+n,t.height+e)}function k(t,n,e){return j(t.x+T()*n,t.y+_()*e,T(),_())}function E(t){var n=void 0!==window.location.port&&null!==window.location.port&&""!==window.location.port?":".concat(window.location.port):"";window.location.href="".concat(window.location.protocol,"//").concat(window.location.hostname).concat(n,"/").concat(t)}axios.get("/api/user").then((function(t){h=t.data.data})),function(t){axios.get("/api/game/".concat(t)).then((function(t){y=t.data.data,x=y.inviter_id,v=y.invitee_id,p("X"),i.addEventListener("mousedown",(function(t){var n,e,o=function(t){var n=i.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}(t);if(o.x>=T()&&o.x<=r.canvas.width-T()&&o.y>=_()&&o.y<=r.canvas.height-_()){var a=(n=o.x,e=o.y,d.flat(2).find((function(t){return n>=t.x&&n<=t.xMax&&e>=t.y&&e<=t.yMax}))),c=function(t){for(var n=null,e=null,i=0;i<r.board.columns;i++)for(var o=0;o<r.board.rows;o++)if(d[i][o]===t){n=i,e=o;break}return{x:n,y:e}}(a);if(void 0!==f[c.x][c.y].content&&null!==f[c.x][c.y].content)return;M()&&"X"===s?(f[c.x][c.y]={content:"X",user:x},P(a,"X"),p("O"),w(c.x,c.y,f[c.x][c.y])):O()&&"O"===s?(f[c.x][c.y]={content:"O",user:v},P(a,"O"),p("X"),w(c.x,c.y,f[c.x][c.y])):swal.fire("Bukan giliranmu")}})),function(){i.setAttribute("width",r.canvas.width),i.setAttribute("height",r.canvas.height),o.fillStyle="white",o.fillRect(0,0,r.canvas.width,r.canvas.height);var t=j(u,l,a,c);(function(t,n,e){for(var i=0;i<n;i++){d[i]=[];for(var o=0;o<e;o++)d[i][o]=k(t,i,o),P(d[i][o])}})(t,r.board.columns,r.board.rows),o.strokeStyle="black",o.lineWidth=2,o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(t.xMax,t.y),o.lineTo(t.xMax,t.yMax),o.lineTo(t.x,t.yMax),o.closePath(),o.stroke()}(),function(t){Echo.private("match.".concat(t.id)).listenForWhisper("turn",(function(t){f[t.grid.x][t.grid.y]=t.grid.state,P(t.grid.state),M()&&"O"===s?(X(d[t.grid.x][t.grid.y]),p("X")):O()&&"X"===s&&(S(d[t.grid.x][t.grid.y]),p("O"))}))}(y),function(t){Echo.private("match.".concat(t.id)).listen("WinnerSelected",(function(t){console.log(t),t.match.winner_id===t.match.loser_id?swal.fire("Seri!").then((function(t){E("game")})):t.match.winner_id===h.id?swal.fire("Kamu Menang!").then((function(t){E("game")})):swal.fire("Kamu Kalah!").then((function(t){E("game")}))}))}(y)}))}(g)}});